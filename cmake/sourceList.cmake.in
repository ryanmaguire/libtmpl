include_guard()
set(_sources @sources@)

foreach(_source IN LISTS _sources)
    string(FIND ${_source} "${CMAKE_CURRENT_SOURCE_DIR}" index)
    if(index GREATER_EQUAL 0)
        cmake_path(RELATIVE_PATH _source)
        cmake_path(GET _source FILENAME _source_file_name)
        if(NOT _source_file_name IN_LIST SOURCE_EXCLUSION_LIST)
            if(LIBTMPL_ENABLE_VERBOSE)
                message(STATUS "Added source: ${_source}")
            endif()
            list(APPEND _filtered_sources ${_source})
        else()
            if(LIBTMPL_ENABLE_VERBOSE)
                message(STATUS "Excluded source: ${_source}")
            endif()
        endif()
    endif()
endforeach()

target_sources(tmpl PRIVATE ${_filtered_sources})
